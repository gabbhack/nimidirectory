<!DOCTYPE html>
<html lang="en">
<head>
  <title>Nim Package Directory</title>
  <link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="New and updated Nim packages" href="https://nimble.directory/packages.xml">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlite.css">
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script type="text/javascript" src="/js/app.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top py-3">
  <div class="container">
    <a href="/" class="logo fw-500 display-1 text-black text-decoration-none navbar-brand"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item mx-2">
          <a href="https://nim-lang.org/" class="nav-link">What's Nim?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="/about.html" class="nav-link">What's Nimble?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="https://github.com/nim-lang/packages/" class="nav-link">Publish your package</a>
        </li>
        <!-- TODO: replace with something different -->
        <li class="nav-item ms-3">
          <a class="nav-link" href="https://www.youtube.com/channel/UCDAYn_VFt0VisL5-1a5Dk7Q/">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
          </a>
        </li>
        <li class="nav-item ms-3">
          <a class="nav-link theme-switcher-btn" id="darkmode" onclick="toggle_dark_mode()" href="#">
            <span id="light-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </span>
            <span id="dark-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="content">
  <div class="container">
    <div class="container pt-10">
        <h3 class="mb-3 fw-bold display-6 pt-4">constantine</h3>
        <p class="tags">
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">cryptography</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">blockchain</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">zk</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">bigint</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">math</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">proof-systems</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">elliptic-curves</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">finite-fields</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">assembly</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">gpu</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">cuda</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">sha256</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">hash</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">hmac</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">hkdf</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">crypto</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">security</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">simd</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">crypto</button></a>
                </span>
            
        </p>
        
            <p class="pkg-desc">Modular, high-performance, zero-dependency cryptography stack for proof systems and blockchain protocols.</p>
        
        <a title="Copy" onclick="document.querySelector('#cmd').select();document.execCommand('copy');"
            alt="Copy on clipboard">
            <i class="fa fa-copy"></i>
        </a>
        <input id="cmd" onclick="this.select();" value="nimble install constantine" readonly="">
        <br>
        <small style="font-size: 0.8rem;">Need help? Read <a
                href="https://github.com/nim-lang/nimble#creating-packages">Nimble</a></small>
    </div>

    <div class="container row pt-4" id="pkg-content">
        <div class="col-8 box rounded p-3" id="readme-section">
            
                <document><h1>Constantine</h1>
<p><a href="https://opensource.org/licenses/Apache-2.0">  <img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" style="max-width: 100%;" alt="License: Apache" /></a>
<a href="https://opensource.org/licenses/MIT">  <img src="https://img.shields.io/badge/License-MIT-blue.svg" style="max-width: 100%;" alt="License: MIT" /></a>
<img src="https://img.shields.io/badge/stability-experimental-orange.svg" style="max-width: 100%;" alt="Stability: experimental" />
<a href="https://github.com/mratsim/constantine/actions?query=workflow%3A%22Constantine+CI%22+branch%3Amaster">  <img src="https://github.com/mratsim/constantine/workflows/Constantine%20CI/badge.svg" style="max-width: 100%;" alt="Github Actions CI" /></a></p>
<p>  <em>Constantine: High performance cryptography for proof systems and blockchain protocols</em></p>
<blockquote>
<p>‚ÄúA cryptographic system should be secure even if everything about the system, except the key, is public knowledge.‚Äù<br />
‚Äî Auguste Kerckhoffs</p>
</blockquote>
<p>This library provides <a href="https://en.wikipedia.org/wiki/Timing_attack">constant-time</a> implementation of cryptographic primitives
with a particular focus on cryptography used in blockchains and zero-knowledge proof systems.</p>
<!--  TOC  -->
<ul>
<li><a href="#constantine">Constantine</a>
<ul>
<li><a href="#public-api-curves--protocols">Public API: Curves &amp; Protocols</a>
<ul>
<li>  <a href="#protocols">Protocols</a></li>
<li>  <a href="#elliptic-curves">Elliptic Curves</a></li>
<li>  <a href="#general-cryptography">General cryptography</a></li>
<li>  <a href="#threadpool">Threadpool</a></li>
</ul>
</li>
<li><a href="#installation">Installation</a>
<ul>
<li>  <a href="#from-rust">From Rust</a></li>
<li>  <a href="#from-go">From Go</a></li>
<li>  <a href="#from-c">From C</a></li>
<li>  <a href="#from-nim">From Nim</a></li>
</ul>
</li>
<li>  <a href="#dependencies--requirements">Dependencies &amp; Requirements</a></li>
<li>  <a href="#performance">Performance</a></li>
<li>  <a href="#assembly--hardware-acceleration">Assembly &amp; Hardware acceleration</a></li>
<li><a href="#security">Security</a>
<ul>
<li>  <a href="#disclaimer">Disclaimer</a></li>
<li>  <a href="#security-disclosure">Security disclosure</a></li>
</ul>
</li>
<li>  <a href="#why-nim">Why Nim</a></li>
<li>  <a href="#license">License</a></li>
</ul>
</li>
</ul>
<!--  /TOC  -->
<p>The library aims to be a fast, compact and hardened library for elliptic curve cryptography needs, in particular for blockchain protocols and zero-knowledge proofs system.</p>
<p>The library focuses on following properties:</p>
<ul>
<li>constant-time (not leaking secret data via <a href="https://en.wikipedia.org/wiki/Side-channel_attack">side-channels</a>)</li>
<li>performance</li>
<li>generated code size, datatype size and stack usage</li>
</ul>
<p>in this order.</p>
<h2>Public API: Curves &amp; Protocols</h2>
<p>Protocols are a set of routines, designed for specific goals or a combination thereof:</p>
<ul>
<li>confidentiality: only the intended receiver of a message can read it</li>
<li>authentication: the other party in the communication is the expected part</li>
<li>integrity: the received message has not been tampered with</li>
<li>non-repudiation: the sender of a message cannot repudiated it</li>
</ul>
<p>  <strong>Legend</strong></p>
<ul>
<li>:white_check_mark:: Full support</li>
<li>:building_construction:: Partial support:
<ul>
<li>in C, some APIs not provided.</li>
<li>in Rust, only low-level constantine-sys API available but no high-level wrapper.</li>
</ul>
</li>
<li>:see_no_evil:: Missing support</li>
</ul>
<h3>Protocols</h3>
<p>Constantine supports the following protocols in its public API.</p>
<table>
<thead>
<tr>
<th />
<th align="center">Nim</th>
<th align="center">C</th>
<th>Rust</th>
<th align="center">Go</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ethereum BLS signatures</td>
<td align="center">:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
<td>:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
</tr>
<tr>
<td>Ethereum KZG commitments for EIP-4844</td>
<td align="center">:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
<td>:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
</tr>
<tr>
<td>Ethereum IPA commitments for Verkle Tries</td>
<td align="center">:building_construction:</td>
<td align="center">:see_no_evil:</td>
<td>:see_no_evil:</td>
<td align="center">:see_no_evil:</td>
</tr>
<tr>
<td>Ethereum Virtual Machine BN254 Precompiles ECADD, ECMUL, ECPAIRING</td>
<td align="center">:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
<td>:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
</tr>
<tr>
<td>EVM BLS12-381 precompiles (EIP-2537)</td>
<td align="center">:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
<td>:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
</tr>
<tr>
<td>EVM Misc: SHA256, modexp</td>
<td align="center">:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
<td>:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
</tr>
<tr>
<td>Zk Accel layer for Halo2 proof system (experimental)</td>
<td align="center">not applicable</td>
<td align="center">not applicable</td>
<td>:white_check_mark:</td>
<td align="center">not applicable</td>
</tr></tbody></table>
<h3>Elliptic Curves</h3>
<p>Constantine supports the following curves in its public API.</p>
<table>
<thead>
<tr>
<th />
<th align="center">Nim</th>
<th align="center">C</th>
<th>Rust</th>
<th align="center">Go</th>
</tr>
</thead>
<tbody>
<tr>
<td>BN254-Snarks</td>
<td align="center">:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
<td>:white_check_mark:</td>
<td align="center">:see_no_evil:</td>
</tr>
<tr>
<td>BLS12-381</td>
<td align="center">:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
<td>:white_check_mark:</td>
<td align="center">:see_no_evil:</td>
</tr>
<tr>
<td>Pasta curves (Pallas &amp; Vesta)</td>
<td align="center">:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
<td>:white_check_mark:</td>
<td align="center">:see_no_evil:</td>
</tr></tbody></table>
<p>For all elliptic curves, the following arithmetic is supported</p>
<ul>
<li>field arithmetic
<ul>
<li>on Fr (i.e. modulo the 255-bit curve order)</li>
<li>on Fp (i.e. modulo the 381-bit prime modulus)</li>
</ul>
</li>
<li>elliptic curve arithmetic:
<ul>
<li>on elliptic curve over Fp (EC ùîæ‚ÇÅ) with affine, jacobian and homogenous projective coordinates</li>
<li>on elliptic curve over Fp2 (EC ùîæ‚ÇÇ) with affine, jacobian and homogenous projective coordinates</li>
<li>including scalar multiplication, multi-scalar-multiplication (MSM) and parallel MSM</li>
</ul>
</li>
</ul>
<p><em>All operations are constant-time unless explicitly mentioned</em> vartime.</p>
<p>For pairing-friendly curves Fp2 arithmetic is also exposed.<br />
:building_construction: Pairings and multi-pairings are implemented but not exposed yet.</p>
<h3>General cryptography</h3>
<p>Constantine supports the following hash functions and CSPRNGs in its public API.</p>
<table>
<thead>
<tr>
<th />
<th align="center">Nim</th>
<th align="center">C</th>
<th>Rust</th>
<th align="center">Go</th>
</tr>
</thead>
<tbody>
<tr>
<td>SHA256</td>
<td align="center">:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
<td>:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
</tr>
<tr>
<td>Cryptographically-secure RNG from Operating System (sysrand)</td>
<td align="center">:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
<td>:white_check_mark:</td>
<td align="center">:white_check_mark:</td>
</tr></tbody></table>
<h3>Threadpool</h3>
<p>Constantine also exposes a high-performance threadpool for Nim that inherits performance and API from:</p>
<ul>
<li>
<p>Task parallelism API RFC: https://github.com/nim-lang/RFCs/issues/347</p>
<ul>
<li>Weave data parallelism API:
<ul>
<li><code>spawn</code> and <code>sync</code></li>
<li><code>parallelFor</code> and <code>syncScope</code>
<ul>
<li><code>parallelFor</code> supports arbitrarily complex reduction.
Constantine uses it extensively for parallel elliptic curve sum reductions.</li>
</ul>
</li>
<li><code>isSpawned</code> and <code>isReady</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>CPU Topology - Query the number of threads available at the OS/VM-level to run computations:</p>
<ul>
<li><code>ctt_cpu_get_num_threads_os</code> in C</li>
<li><code>getNumThreadsOS</code> in Nim</li>
<li><code>constantine_core::hardware::get_num_threads_os</code> in Rust</li>
</ul>
</li>
<li>
<p>https://github.com/mratsim/weave</p>
</li>
<li>
<p>https://github.com/status-im/nim-taskpools</p>
</li>
</ul>
<p>The threadpool supports nested parallelism to exploit high core counts and does not suffer from OpenMP limitations of nested parallel loops. For batching KZG verification, Constantine issues 3 multi-scalar multiplication in parallel, each using at 3 nested parallel loops.</p>
<p>See the following documents on the threadpool performance details, design and research:</p>
<ul>
<li>  <a href="./README-PERFORMANCE.md#parallelism">./README-PERFORMANCE.md#parallelism</a></li>
<li>  <a href="./docs/threadpool-design.md">./docs/threadpool-design.md</a></li>
<li>https://github.com/mratsim/weave/tree/7682784/research</li>
</ul>
<h2>Installation</h2>
<blockquote>
<p>[!IMPORTANT]
Constantine can be compiled by Nim v1.6.x, v2.0.2 and v2.0.4 but not Nim v2.0.0 (due to a compile-time evaluation crash)</p>
</blockquote>
<h3>From Rust</h3>
<ol>
<li>
<p>Install <code>clang</code> compiler, for example:</p>
<ul>
<li>Debian/Ubuntu <code>sudo apt update &amp;&amp; sudo apt install build-essential clang</code></li>
<li>Archlinux <code>pacman -S base-devel clang</code></li>
</ul>
<blockquote>
<p>[!TIP]
We require Clang as it&apos;s significantly more performant than GCC for cryptographic code, especially for ARM where Constantine has no assembly optimizations. And Rust, like Clang both rely on LLVM.<br />This can be changed to any C compiler by deleting <a href="https://github.com/mratsim/constantine/blob/8991b16/constantine-rust/constantine-sys/build.rs#L17">this line</a>.</p>
</blockquote>
</li>
<li>
<p>Install nim, it is available in most distros package manager for Linux and Homebrew for MacOS
Windows binaries are on the official website: https://nim-lang.org/install_unix.html</p>
<ul>
<li>Debian/Ubuntu <code>sudo apt install nim</code></li>
<li>Archlinux <code>pacman -S nim</code></li>
</ul>
</li>
<li>
<p>Test both:</p>
<ul>
<li>the experimental ZK Accel API (ZAL) for Halo2-KZG</li>
<li>Ethereum EIP4844 KZG polynomial commitments</li>
</ul>
<pre>  <code>git clone https://github.com/mratsim/constantine
cd constantine
cargo test
cargo bench
</code></pre>
</li>
<li>
<p>Add Constantine as a dependency in Cargo.toml</p>
<ul>
<li>for Halo2-KZG Zk Accel Layer
<pre>  <code class="language-toml">[dependencies]
constantine-halo2-zal = { git = &apos;https://github.com/mratsim/constantine&apos; }
</code></pre>
</li>
<li>for Ethereum EIP-4844 KZG polynomial commitments
<pre>  <code class="language-toml">[dependencies]
constantine-ethereum-kzg = { git = &apos;https://github.com/mratsim/constantine&apos; }
</code></pre>
</li>
</ul>
</li>
</ol>
<p>Optionally, cross-language LTO between Nim and Rust can be used, see https://doc.rust-lang.org/rustc/linker-plugin-lto.html:</p>
<p>Add a <code>.cargo/config.toml</code> to your project with the following:</p>
<pre>  <code class="language-toml"># .cargo/config.toml

[build]
rustflags=&quot;-Clinker-plugin-lto -Clinker=clang -Clink-arg=-fuse-ld=lld&quot;
</code></pre>
<p>and modify Constantine&apos;s <a href="https://github.com/mratsim/constantine/blob/8991b16/constantine-rust/constantine-sys/build.rs#L16-L17">  <code>build.rs</code></a> to pass <code>CTT_LTO=1</code></p>
<pre>  <code class="language-Rust"><div class="line"><div class="line-content"><span class="ide">Command</span>::<span class="ide">new</span>(<span class="str">&quot;nimble&quot;</span>)</div></div><div class="line"><div class="line-content">        .<span class="ide">env</span>(<span class="str">&quot;CC&quot;</span>, <span class="str">&quot;clang&quot;</span>)</div></div><div class="line"><div class="line-content">        .<span class="ide">env</span>(<span class="str">&quot;CTT_LTO&quot;</span>, <span class="str">&quot;1&quot;</span>) <span class="com">// &lt;--</span></div></div><div class="line"><div class="line-content">        .<span class="ide">arg</span>(<span class="str">&quot;make_lib_rust&quot;</span>)</div></div><div class="line"><div class="line-content">        .<span class="ide">current_dir</span>(<span class="ide">root_dir</span>)</div></div><div class="line"><div class="line-content">        .<span class="ide">stdout</span>(<span class="ide">Stdio</span>::<span class="ide">inherit</span>())</div></div><div class="line"><div class="line-content">        .<span class="ide">stderr</span>(<span class="ide">Stdio</span>::<span class="ide">inherit</span>())</div></div><div class="line"><div class="line-content">        .<span class="ide">status</span>()</div></div><div class="line"><div class="line-content">        .<span class="ide">expect</span>(<span class="str">&quot;failed to execute process&quot;</span>);</div></div>  </code></pre>
<h3>From Go</h3>
<ol>
<li>
<p>Install any C compiler, <code>clang</code> is recommended, for example:</p>
<ul>
<li>Debian/Ubuntu <code>sudo apt update &amp;&amp; sudo apt install build-essential clang</code></li>
<li>Archlinux <code>pacman -S base-devel clang</code></li>
</ul>
</li>
<li>
<p>Install nim, it is available in most distros package manager for Linux and Homebrew for MacOS
Windows binaries are on the official website: https://nim-lang.org/install_unix.html</p>
<ul>
<li>Debian/Ubuntu <code>sudo apt install nim</code></li>
<li>Archlinux <code>pacman -S nim</code></li>
</ul>
</li>
<li>
<p>Compile Constantine as a static (and shared) library in <code>./include</code></p>
<pre>  <code>cd constantine
CC=clang nimble make_lib
</code></pre>
</li>
<li>
<p>Test the go API.</p>
<pre>  <code>cd constantine-go
go test -modfile=../go_test.mod
</code></pre>
<blockquote>
<p>[!IMPORTANT]
Constantine uses a separate modfile for tests.<br />It has no dependencies (key to avoid supply chain attacks) except for testing.</p>
</blockquote>
</li>
</ol>
<h3>From C</h3>
<ol>
<li>
<p>Install a C compiler, <code>clang</code> is recommended, for example:</p>
<ul>
<li>Debian/Ubuntu <code>sudo apt update &amp;&amp; sudo apt install build-essential clang</code></li>
<li>Archlinux <code>pacman -S base-devel clang</code></li>
</ul>
</li>
<li>
<p>Install nim, it is available in most distros package manager for Linux and Homebrew for MacOS
Windows binaries are on the official website: https://nim-lang.org/install_unix.html</p>
<ul>
<li>Debian/Ubuntu <code>sudo apt install nim</code></li>
<li>Archlinux <code>pacman -S nim</code></li>
</ul>
</li>
<li>
<p>Compile the dynamic and static library.</p>
<ul>
<li>
<p>Recommended: <br />
<code>CC=clang nimble make_lib</code></p>
</li>
<li>
<p>or <code>CTT_ASM=0 nimble make_lib</code><br />
to compile without assembly (otherwise it autodetects support)</p>
</li>
<li>
<p>or with default compiler<br />
<code>nimble make_lib</code></p>
</li>
</ul>
</li>
<li>
<p>Ensure the libraries work</p>
<ul>
<li>  <code>nimble test_lib</code></li>
</ul>
</li>
<li>
<p>Libraries location</p>
<ul>
<li>The librariess are put in <code>./lib/</code> folder</li>
<li>The headers are in <a href="./include">./include/</a> for example <a href="./include/constantine/protocols/ethereum_bls_signatures.h">Ethereum BLS signatures</a></li>
</ul>
</li>
<li>
<p>Read the examples in <a href="./examples-c">examples-c</a>:</p>
<ul>
<li>Using the <a href="./examples-c/ethereum_bls_signatures.c">Ethereum BLS signatures bindings from C</a></li>
<li>Testing Constantine BLS12-381 vs GMP <a href="./examples-c/t_libctt_bls12_381.c">./examples-c/t_libctt_bls12_381.c</a></li>
</ul>
</li>
</ol>
<h3>From Nim</h3>
<p>You can install the developement version of the library through nimble with the following command</p>
<pre>  <code>nimble install https://github.com/mratsim/constantine@#master
</code></pre>
<h2>Dependencies &amp; Requirements</h2>
<p>For speed it is recommended to use Clang (see <a href="#Compiler-caveats">Compiler-caveats</a>).
In particular GCC generates inefficient add-with-carry code.</p>
<p>Constantine requires at least:</p>
<ul>
<li>GCC 7 <br />
Previous versions generated incorrect add-with-carry code.</li>
<li>Clang 14 <br />
On x86-64, inline assembly is used to workaround compilers having issues optimizing large integer arithmetic,
and also ensure constant-time code. <br />
Constantine uses the intel assembly syntax to address issues with the default AT&amp;T syntax and constants propagated in Clang. <br />
Clang 14 added support for <code>-masm=intel</code>. <br />
<br />
On MacOS, Apple Clang does not support Intel assembly syntax, use Homebrew Clang instead or compile without assembly.<br />
<em>Note that Apple is discontinuing Intel CPU throughough their product line so this will impact only older model and Mac Pro</em></li>
</ul>
<p>On Windows, Constantine is tested with MinGW. The Microsoft Visual C++ Compiler is not configured.</p>
<p>Constantine has no C, Nim, Rust, Go dependencies, besides compilers, even on Nim standard library except:</p>
<ul>
<li>for testing and benchmarking
<ul>
<li>the tested language json and yaml parsers for test vectors</li>
<li>the tested language standard library for tests, timing and message formatting.</li>
<li>GMP for testing against GMP</li>
</ul>
</li>
<li>for Nvidia GPU backend:
<ul>
<li>the LLVM runtime (&quot;dev&quot; version with headers is not needed)</li>
<li>the CUDA runtime (&quot;dev&quot; version with headers is not needed)</li>
</ul>
</li>
<li>at compile-time
<ul>
<li>we need the std/macros library to generate Nim code.</li>
</ul>
</li>
</ul>
<h2>Performance</h2>
<p>This section got way too long and has its own file.<br />
See <a href="./README-PERFORMANCE.md">./README-PERFORMANCE.md</a></p>
<h2>Assembly &amp; Hardware acceleration</h2>
<ul>
<li>Assembly is used on x86 and x86-64, unless <code>CTT_ASM=0</code> is passed.</li>
<li>Assembly is planned for ARM.</li>
<li>GPU acceleration is planned.</li>
</ul>
<p>Assembly solves both:</p>
<ul>
<li>Security: <a href="./README-PERFORMANCE.md">fighting the compiler for constant time code</a></li>
<li>Performance: <a href="./README-PERFORMANCE.md#compiler-caveats">compiler caveats</a></li>
</ul>
<h2>Security</h2>
<p>Hardening an implementation against all existing and upcoming attack vectors is an extremely complex task.
The library is provided as is, without any guarantees at least until:</p>
<ul>
<li>it gets audited</li>
<li>formal proofs of correctness are produced</li>
<li>formal verification of constant-time implementation is possible</li>
</ul>
<p>Defense against common attack vectors are provided on a best effort basis.
Do note that Constantine has no external package dependencies hence it is not vulnerable to
supply chain attacks (unless they affect a compiler or the OS).</p>
<p>Attackers may go to great lengths to retrieve secret data including:</p>
<ul>
<li>Timing the time taken to multiply on an elliptic curve</li>
<li>Analysing the power usage of embedded devices</li>
<li>Detecting cache misses when using lookup tables</li>
<li>Memory attacks like page-faults, allocators, memory retention attacks</li>
</ul>
<p>This is would be incomplete without mentioning that the hardware, OS and compiler
actively hinder you by:</p>
<ul>
<li>Hardware: sometimes not implementing multiplication in constant-time.</li>
<li>OS: not providing a way to prevent memory paging to disk, core dumps, a debugger attaching to your process or a context switch (coroutines) leaking register data.</li>
<li>Compiler: optimizing away your carefully crafted branchless code and leaking server secrets or optimizing away your secure erasure routine which is deemed &quot;useless&quot; because at the end of the function the data is not used anymore.</li>
</ul>
<p>A growing number of attack vectors is being collected for your viewing pleasure
at https://github.com/mratsim/constantine/wiki/Constant-time-arithmetics</p>
<h3>Disclaimer</h3>
<p>Constantine&apos;s authors do their utmost to implement a secure cryptographic library
in particular against remote attack vectors like timing attacks.</p>
<p>Please note that Constantine is provided as-is without guarantees.
Use at your own risks.</p>
<p>Thorough evaluation of your threat model, the security of any cryptographic library you are considering,
and the secrets you put in jeopardy is strongly advised before putting data at risk.
The author would like to remind users that the best code can only mitigate
but not protect against human failures which are the weakest link and largest
backdoors to secrets exploited today.</p>
<h3>Security disclosure</h3>
<p>You can privately report a security vulnerability through the Security tab.</p>
<p>  <code>Security &gt; Report a vulnerability</code></p>
<h2>Why Nim</h2>
<p>The Nim language offers the following benefits for cryptography:</p>
<ul>
<li>Compilation to machine code via C or C++ or alternatively compilation to Javascript. Easy FFI to those languages.
<ul>
<li>Obscure embedded devices with proprietary C compilers can be targeted.</li>
<li>WASM can be targeted.</li>
</ul>
</li>
<li>Performance reachable in C is reachable in Nim, easily.</li>
<li>Rich type system: generics, dependent types, mutability-tracking and side-effect analysis, borrow-checking, compiler enforced distinct types (Miles != Meters, SecretBool != bool and SecretWord != uint64).</li>
<li>Compile-time evaluation, including parsing hex string, converting them to BigInt or Finite Field elements and doing bigint operations.</li>
<li>Assembly support either inline or a simple <code>{.compile: &quot;myasm.S&quot;.}</code> away</li>
<li>No GC if no GC-ed types are used (automatic memory management is set at the type level and optimized for latency/soft-realtime by default and can be totally deactivated).</li>
<li>Procedural macros working directly on AST to
<ul>
<li>create generic curve configuration,</li>
<li>derive constants</li>
<li>write a size-independent inline assembly code generator</li>
</ul>
</li>
<li>Upcoming proof system for formal verification via Z3 (<a href="https://nim-lang.org/docs/drnim.html">DrNim</a>, <a href="https://github.com/nim-lang/RFCs/issues/222">Correct-by-Construction RFC</a>)</li>
</ul>
<h2>License</h2>
<p>Licensed and distributed under either of</p>
<ul>
<li>MIT license: <a href="LICENSE-MIT">LICENSE-MIT</a> or http://opensource.org/licenses/MIT</li>
</ul>
<p>or</p>
<ul>
<li>Apache License, Version 2.0, (<a href="LICENSE-APACHEv2">LICENSE-APACHEv2</a> or http://www.apache.org/licenses/LICENSE-2.0)</li>
</ul>
<p>at your option. This file may not be copied, modified, or distributed except according to those terms.</p>
<p>This library has <strong>no external dependencies</strong>.
In particular GMP is used only for testing and differential fuzzing
and is not linked in the library.</p>
</document>
            
        </div>
        <div class="col-3" id="meta-section">
            <div class="container box rounded p-3">
                
                    <p>
                        <strong>Licence:</strong>
                        MIT or Apache License 2.0
                    </p>
                

                
                    <p> <a href="https://github.com/mratsim/constantine">Project website</a> </p>
                

                
            </div>
        </div>
    </div>
</div>
</div>

<footer class="pt-10 px-3">
  <div class="container pt-4">
    <div class="row mb-4">
      <div class="col-lg-3">
        <h4 class="h5">Getting started with Nim</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://learnxinyminutes.com/docs/nim/">Learn Nim in 5 minutes</a></li>
          <li><a class="text-decoration-none" href="https://nim-by-example.github.io/">Nim by Example</a></li>
          <li><a class="text-decoration-none" href="https://play.nim-lang.org/">Official Playground</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Official Tutorials</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut1.html">General Tutorial</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut2.html">Advanced Features</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut3.html">Macros and Metaprogramming</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Nim for...</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-C-programmers">C programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-Python-Programmers">Python programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-TypeScript-Programmers">TypeScript programmers</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Documentation</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/lib.html">Standard Library</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/manual.html">Language Manual</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tools.html">Tools Documentation</a></li>
        </ul>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12 text-center mt-4 mx-auto">
        <a href="#" class="d-block mb-3 mx-auto bw"></a>
        <p class="text-muted">
        Created in <a href="https://nim-lang.org/">Nim</a> on <a href="https://pages.github.com/">GitHub Pages</a>.
        <a href="https://github.com/gabbhack/nimidirectory">Available</a>
        under <a href="https://en.wikipedia.org/wiki/GNU_General_Public_License#Version_3">GPLv3</a>
        </p>
        <p class="text-muted">
        Builded at 2024-07-19T14:48:47Z
        </p>
      </div>
    </div>
  </div>
</footer>
<script>
</script>
</body>
</html>
